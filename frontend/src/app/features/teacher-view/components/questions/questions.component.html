<div class="questions-container">
  <div class="section-header">
    <h1>Análisis de Preguntas</h1>
    <div class="filters">
      <div class="filter-group">
        <label for="subject">Asignatura:</label>
        <select id="subject" (change)="onSubjectChange($event)">
          <option *ngFor="let subject of getSubjectNames()" [value]="subject">{{subject}}</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="topic">Tema:</label>
        <select id="topic" (change)="onTopicChange($event)">
          <option *ngFor="let topic of getTopicNames()" [value]="topic">{{topic}}</option>
        </select>
      </div>
    </div>
  </div>

  <div class="stats-cards">
    <div class="stat-card">
      <div class="stat-icon questions-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M21 6h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1zm-4 6V3c0-.55-.45-1-1-1H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1z" fill="currentColor"/>
        </svg>
      </div>
      <div class="stat-content">
        <div class="stat-value">{{stats.totalQuestions}}</div>
        <div class="stat-label">Total de Preguntas</div>
      </div>
    </div>

    <div class="stat-card" *ngIf="stats.uniqueUsers !== undefined">
      <div class="stat-icon users-icon">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
          <path d="M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm4 18v-6h2.5l-2.54-7.63A3.01 3.01 0 0 0 17.07 7H16.93c-1.32 0-2.51.84-2.93 2.07L12 15h-2V9.5a2.5 2.5 0 0 1 2.5-2.5h.5V5h-.5A4.5 4.5 0 0 0 8 9.5V15H6v-3H4v8h2v-3h2v3h2v-6h3l.5 1.5H16V22h4z" fill="currentColor"/>
        </svg>
      </div>
      <div class="stat-content">
        <div class="stat-value">{{stats.uniqueUsers}}</div>
        <div class="stat-label">Usuarios Únicos</div>
      </div>
    </div>
  </div>

  <div class="questions-table">
    <table>
      <thead>
        <tr>
          <th>Pregunta</th>
          <th>Usuario</th>
          <th>Asignatura</th>
          <th>Tema</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let question of getFilteredQuestions()">
          <td class="question-text">{{question.text}}</td>
          <td class="user-info">
            <div class="user-name">{{question.userName}}</div>
            <div class="user-email" *ngIf="question.userEmail">{{question.userEmail}}</div>
          </td>
          <td>{{question.subject}}</td>
          <td>{{question.topic}}</td>
        </tr>
        <tr *ngIf="getFilteredQuestions().length === 0">
          <td colspan="4" class="no-questions">
            No hay preguntas disponibles con los filtros seleccionados
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
